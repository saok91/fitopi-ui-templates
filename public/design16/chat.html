<!-- Design 16: Teal Wellness - chat.html (complete) -->
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÙÛŒØªÙˆÙ¾ÛŒ - Ú¯ÙØªÚ¯Ùˆ Ø¨Ø§ Ù…Ø±Ø¨ÛŒ</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app chat-app">
    <!-- Chat Header -->
    <header class="chat-header">
      <div class="coach-info">
        <div class="coach-avatar" aria-hidden="true"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
        <div class="coach-details">
          <span class="coach-name">Ù…Ø±Ø¨ÛŒ ÙÛŒØªÙˆÙ¾ÛŒ</span>
          <span class="coach-status online">Ø¢Ù†Ù„Ø§ÛŒÙ†</span>
        </div>
      </div>
    </header>

    <!-- Chat Messages -->
    <main class="chat-main">
      <div class="messages-container">
        <div class="message coach">
          <div class="message-bubble">
            <p>Ø³Ù„Ø§Ù… Ø²Ù‡Ø±Ø§ Ø¬Ø§Ù†!</p>
            <p>Ø§Ù…Ø±ÙˆØ² Ú†Ø·ÙˆØ±ÛŒØŸ Ø¯ÛŒØ¯Ù… ØµØ¨Ø­Ø§Ù†Ù‡â€ŒØª Ø±Ùˆ Ø«Ø¨Øª Ú©Ø±Ø¯ÛŒØŒ Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯!</p>
          </div>
          <span class="message-time">Û¸:Û´Ûµ</span>
        </div>

        <div class="message user">
          <div class="message-bubble">
            <p>Ø³Ù„Ø§Ù…! Ø®ÙˆØ¨Ù… Ù…Ù…Ù†ÙˆÙ†. ÛŒÚ©Ù… Ù†Ú¯Ø±Ø§Ù†Ù… Ø¨Ø±Ø§ÛŒ Ù†Ø§Ù‡Ø§Ø±ØŒ Ù…Ù‡Ù…ÙˆÙ†ÛŒ Ø¯Ø¹ÙˆØªÛŒÙ… ğŸ˜…</p>
          </div>
          <span class="message-time">Û¹:Û±Û²</span>
        </div>

        <div class="message coach">
          <div class="message-bubble">
            <p>Ø¢Ù‡Ø§ØŒ ÙÙ‡Ù…ÛŒØ¯Ù…! Ù…Ù‡Ù…ÙˆÙ†ÛŒâ€ŒÙ‡Ø§ Ú†Ø§Ù„Ø´â€ŒØ¨Ø±Ø§Ù†Ú¯ÛŒØ²Ù†ØŒ ÙˆÙ„ÛŒ Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´.</p>
            <p>ÛŒÙ‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¯Ø§Ø±Ù…: Ù‚Ø¨Ù„ Ø§Ø² Ø±ÙØªÙ† ÛŒÙ‡ Ù…ÛŒØ§Ù†â€ŒÙˆØ¹Ø¯Ù‡ Ø³Ø¨Ú© Ø¨Ø®ÙˆØ± Ú©Ù‡ Ø®ÛŒÙ„ÛŒ Ú¯Ø±Ø³Ù†Ù‡ Ù†Ø¨Ø§Ø´ÛŒ. Ø¨Ø¹Ø¯Ø´ Ù‡Ù… Ø³Ø¹ÛŒ Ú©Ù† Ø§Ø² Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² ÛŒÙ‡ Ú©Ù… Ø¨Ú©Ø´ÛŒØŒ Ù†Ù‡ Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø­Ø±ÙˆÙ… Ø¨Ø§Ø´ÛŒ.</p>
          </div>
          <span class="message-time">Û¹:Û±Ûµ</span>
        </div>

        <div class="message user">
          <div class="message-bubble">
            <p>Ù…Ù…Ù†ÙˆÙ†! Ø§ÛŒÙ† Ø§ÛŒØ¯Ù‡ Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨Ù‡. ÛŒÙ‡ Ø³ÛŒØ¨ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù… Ù‚Ø¨Ù„Ø´.</p>
          </div>
          <span class="message-time">Û¹:Û±Û¸</span>
        </div>

        <div class="message coach">
          <div class="message-bubble">
            <p>Ø¹Ø§Ù„ÛŒÙ‡! Ø³ÛŒØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø®ÙˆØ¨ÛŒÙ‡ Ú†ÙˆÙ† ÙÛŒØ¨Ø± Ø¯Ø§Ø±Ù‡ Ùˆ Ø³ÛŒØ± Ù…ÛŒÚ©Ù†Ù‡.</p>
            <p>Ø¨Ø¹Ø¯ Ø§Ø² Ù…Ù‡Ù…ÙˆÙ†ÛŒ Ù‡Ù… Ø¨Ù‡Ù… Ø¨Ú¯Ùˆ Ú†ÛŒ Ø®ÙˆØ±Ø¯ÛŒ ØªØ§ Ø¨Ø§ Ù‡Ù… Ø­Ø³Ø§Ø¨ Ú©Ù†ÛŒÙ…. Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒ!</p>
          </div>
          <span class="message-time">Û¹:Û²Û°</span>
        </div>

        <!-- Ú†Ú©â€ŒØ§ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡ -->
        <div class="message checkin" id="checkin-block">
          <div class="checkin-bubble">
            <div class="checkin-header">
              <span class="checkin-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
              </span>
              <span class="checkin-title">Ú†Ú©â€ŒØ§ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡</span>
            </div>
            <form class="checkin-form" id="checkin-form" novalidate>
              <div class="checkin-field">
                <label class="checkin-label">Ø§Ù…Ø±ÙˆØ² Ú†Ø·ÙˆØ±ÛŒØŸ <span class="required">*</span></label>
                <div class="checkin-options" role="group" aria-required="true">
                  <button type="button" class="checkin-option" data-value="good" data-name="mood">Ø®ÙˆØ¨</button>
                  <button type="button" class="checkin-option" data-value="medium" data-name="mood">Ù…ØªÙˆØ³Ø·</button>
                  <button type="button" class="checkin-option" data-value="bad" data-name="mood">Ø¨Ø¯</button>
                </div>
                <input type="hidden" name="mood" id="checkin-mood" required>
                <span class="checkin-error" id="error-mood" aria-live="polite"></span>
              </div>
              <div class="checkin-field">
                <label class="checkin-label">Ú†Ù‚Ø¯Ø± Ø¨Ù‡ Ø±Ú˜ÛŒÙ…Øª Ù¾Ø§ÛŒØ¨Ù†Ø¯ Ø¨ÙˆØ¯ÛŒØŸ <span class="required">*</span></label>
                <div class="checkin-options" role="group" aria-required="true">
                  <button type="button" class="checkin-option" data-value="good" data-name="diet">Ø®ÙˆØ¨</button>
                  <button type="button" class="checkin-option" data-value="medium" data-name="diet">Ù…ØªÙˆØ³Ø·</button>
                  <button type="button" class="checkin-option" data-value="bad" data-name="diet">Ø¨Ø¯</button>
                </div>
                <input type="hidden" name="diet" id="checkin-diet" required>
                <span class="checkin-error" id="error-diet" aria-live="polite"></span>
              </div>
              <div class="checkin-field">
                <label class="checkin-label">Ú†Ø§Ù„Ø´Øª Ú†ÛŒÙ‡ØŸ <span class="optional">(Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</span></label>
                <textarea name="challenge" id="checkin-challenge" class="checkin-textarea" placeholder="Ø§Ú¯Ø± Ú†Ø§Ù„Ø´ÛŒ Ø¯Ø§Ø±ÛŒ Ø¨Ù†ÙˆÛŒØ³..." rows="1"></textarea>
              </div>
              <button type="submit" class="checkin-submit-btn">Ø«Ø¨Øª Ú†Ú©â€ŒØ§ÛŒÙ†</button>
            </form>
            <!-- Ø§Ø«Ø± Ú©ÙˆÚ†Ú© Ø¨Ø¹Ø¯ Ø§Ø² Ø«Ø¨Øª -->
            <div class="checkin-trace" id="checkin-trace">
              <span class="checkin-trace-icon">âœ“</span>
              <span class="checkin-trace-text">Ú†Ú©â€ŒØ§ÛŒÙ† Ø«Ø¨Øª Ø´Ø¯</span>
            </div>
          </div>
          <span class="message-time checkin-time">Ø§Ù„Ø§Ù†</span>
        </div>

        <div class="message coach">
          <div class="message-bubble">
            <p>Ú†Ú©â€ŒØ§ÛŒÙ† Ø§Ù…Ø±ÙˆØ²Øª Ø±Ùˆ Ø¯ÛŒØ¯Ù…ØŒ Ù…Ù…Ù†ÙˆÙ† Ú©Ù‡ Ø«Ø¨Øª Ú©Ø±Ø¯ÛŒ!</p>
            <p>Ø§Ú¯Ù‡ Ø¨Ø®ÙˆØ§ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ú†Ø§Ù„Ø´â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ú¯ÙØªÛŒ Ø¨ÛŒØ´ØªØ± Ø­Ø±Ù Ø¨Ø²Ù†ÛŒÙ…ØŒ Ù‡Ù…ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³.</p>
          </div>
          <span class="message-time">Û¹:Û²Ûµ</span>
        </div>

        <div class="message user">
          <div class="message-bubble">
            <p>Ø¨Ø§Ø´Ù‡ Ø­ØªÙ…Ø§Ù‹. Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒâ€ŒÙ‡Ø§Øª ğŸ™</p>
          </div>
          <span class="message-time">Û¹:Û²Û·</span>
        </div>
      </div>
    </main>

    <!-- Chat Input -->
    <div class="chat-input-container">
      <div class="chat-input-wrapper">
        <label for="chat-input" class="visually-hidden">Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</label>
        <textarea id="chat-input" class="chat-input" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." rows="1"></textarea>
        <button type="button" class="send-btn" aria-label="Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13"/>
            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
        <span>Ø®Ø§Ù†Ù‡</span>
      </a>
      <a href="log.html" class="nav-item">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        <span>Ø«Ø¨Øª</span>
      </a>
      <a href="chat.html" class="nav-item active">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
        <span>Ú¯ÙØªÚ¯Ùˆ</span>
      </a>
    </nav>
  </div>
  <script>
    (function () {
      var form = document.getElementById('checkin-form');
      var block = document.getElementById('checkin-block');
      var trace = document.getElementById('checkin-trace');
      var moodInput = document.getElementById('checkin-mood');
      var dietInput = document.getElementById('checkin-diet');
      var errorMood = document.getElementById('error-mood');
      var errorDiet = document.getElementById('error-diet');

      function clearErrors() {
        errorMood.textContent = '';
        errorDiet.textContent = '';
      }

      function selectOption(fieldName, value) {
        var opts = block.querySelectorAll('.checkin-option[data-name="' + fieldName + '"]');
        opts.forEach(function (o) { o.classList.toggle('selected', o.getAttribute('data-value') === value); });
        if (fieldName === 'mood') moodInput.value = value;
        if (fieldName === 'diet') dietInput.value = value;
        if (fieldName === 'mood') errorMood.textContent = '';
        if (fieldName === 'diet') errorDiet.textContent = '';
      }

      block.querySelectorAll('.checkin-option').forEach(function (btn) {
        btn.addEventListener('click', function () {
          selectOption(btn.getAttribute('data-name'), btn.getAttribute('data-value'));
        });
      });

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        clearErrors();
        var valid = true;
        if (!moodInput.value.trim()) {
          errorMood.textContent = 'Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';
          valid = false;
        }
        if (!dietInput.value.trim()) {
          errorDiet.textContent = 'Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';
          valid = false;
        }
        if (!valid) return;
        block.classList.add('checkin-submitted');
      });

      // textarea Ú†Ø§Ù„Ø´: ÛŒÚ© Ø®Ø· Ø§ÙˆÙ„ØŒ ØªØ§ Û³ Ø®Ø· Ø±Ø´Ø¯ØŒ Ø¨Ø¹Ø¯ Ø§Ø³Ú©Ø±ÙˆÙ„
      (function () {
        var ta = document.getElementById('checkin-challenge');
        if (!ta) return;
        var style = getComputedStyle(ta);
        var lineHeight = parseFloat(style.lineHeight) || parseFloat(style.fontSize) * 1.4;
        var paddingTop = parseFloat(style.paddingTop) || 10;
        var paddingBottom = parseFloat(style.paddingBottom) || 10;
        var oneLineHeight = 44;
        var maxHeight = Math.ceil(lineHeight * 3 + paddingTop + paddingBottom);

        function resize() {
          ta.style.height = oneLineHeight + 'px';
          var sh = ta.scrollHeight;
          if (sh <= oneLineHeight) {
            ta.style.overflowY = 'hidden';
            return;
          }
          ta.style.height = 'auto';
          sh = ta.scrollHeight;
          if (sh <= maxHeight) {
            ta.style.height = sh + 'px';
            ta.style.overflowY = 'hidden';
          } else {
            ta.style.height = maxHeight + 'px';
            ta.style.overflowY = 'auto';
          }
        }
        ta.addEventListener('input', resize);
        resize();
      })();
    })();
  </script>
</body>
</html>
